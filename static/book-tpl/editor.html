<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>screenshot-api-server</title>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="//cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/codemirror.min.css" rel="stylesheet">
    <link href="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/theme/darcula.min.css" rel="stylesheet">
<!--    <link href="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/theme/eclipse.min.css" rel="stylesheet">-->
<!--    <link href="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/theme/base16-dark.min.css" rel="stylesheet">-->

<!--    <link href="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/addon/lint/lint.min.css" rel="stylesheet">-->
<!--    <link href="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/addon/hint/show-hint.min.css" rel="stylesheet">-->

    
    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/codemirror.min.js"></script>

    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/mode/css/css.js"></script>
<!--    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/mode/htmlmixed/htmlmixed.min.js"></script>-->
    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/mode/javascript/javascript.min.js"></script>
    
<!--    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/addon/lint/lint.js"></script>-->
<!--    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/addon/hint/show-hint.min.js"></script>-->
<!--    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/addon/lint/json-lint.min.js"></script>-->
<!--    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/addon/hint/html-hint.min.js"></script>-->
<!--    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/addon/lint/css-lint.min.js"></script>-->
    <script src="//cdn.bootcdn.net/ajax/libs/codemirror/5.62.2/mode/xml/xml.min.js"></script>



    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/lodash.min.js"></script>
    
    <style>
        body {
            color: #000;
            font-family: "Microsoft YaHei UI", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            font-weight: 400;
        }

        html,body{
            height:100%;
        }
        .container-fluid{
            height:100%;
            background-color: rgb(43,43,43);
        }
        
        .label-el {
            color: white;
            text-align: center;
            font-size: 16px;
            padding: 5px;
        }
        
        .value-el{
            height: calc(100% - 20px);
        }
        .value-el .textarea{
            width: 100%;height: calc(100% - 20px);
            margin: 20px 0;
        }

        .CodeMirror{
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row" style="height: 50px;">
            <div class="col-xs-4" style="height: 100%; font-size: 24px;color: white;line-height: 50px;">
                bookjs-eazy模板生成PDF在线测试
            </div>
        </div>
        <div class="row" style="height: calc(100% - 50px)">
            <div class="col-xs-4" style="height: 100%;">
                <div class="row" style="height: 33.3%;background-color: #db7f37;">
                    <div class="col-xs-12 label-el">样&nbsp;&nbsp;&nbsp;&nbsp;式</div>
                    <div class="col-xs-12 value-el" style="">
                        <div class="row" style="height: 100%;">
                                <textarea name="bookStyle" style="width: 100%;height: 100%">
    body {
        color: #000;
        font-family: "Microsoft YaHei UI", sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        font-weight: 400;
    }
    
    .simple-table {
        width: 100%;
        border-spacing: 0;
        border-collapse: unset;
        border-top: #000 1px solid;
        border-right: #000 1px solid;
        font-size: 1rem;
        line-height: 1rem;
    }
    
    .simple-table th,
    .simple-table td {
        border-left: #000 1px solid;
        border-bottom: #000 1px solid;
    }
    
    h1,h2,h3,h4{
        font-weight: 600;
        padding-bottom: 1.5em;
        padding-top: 2.5em;
    }
    h1 {
        font-size: 1.6rem;
        text-align: center;
    }
    h2 {
        font-size: 1.5rem;
        text-align: center;
    }
    h3 {
        font-size: 1.4rem;
    }
    h4 {
        font-size: 1.3rem;
    }
    
    .pendant-title{
        position: absolute;
        color: #666666;
        top: 1cm;
        left: 1cm;
    }
                            </textarea>
                        </div>
                    </div>
                </div>
                <div class="row" style="height: 33.3%;background-color: #0d8050;">
                    <div class="col-xs-12 label-el">模&nbsp;&nbsp;&nbsp;&nbsp;板</div>
                    <div class="col-xs-12 value-el" style="">
                        <div class="row" style="height: 100%;">
                            <textarea name="bookTpl" style="width: 100%;height: 100%">
<div data-op-type="new-page"></div>
<div data-op-type="pendants"><!-- 定义页面部件（页眉/页脚/书签/水印背景等） -->
    <div class='pendant-title'>第一章：Echart图表</div>
</div>
<div data-op-type='new-page'></div>
<div data-op-type="pendants"><!-- 定义页面部件（页眉/页脚/书签/水印背景等） -->
    <div class='pendant-title'>第二章：块盒子示例</div>
</div>
<h1 data-op-type='block'>第2章 块盒子示例</h1>
<table data-op-type="block-box" class="simple-table" border="1">
    <thead>
    <tr><th>ID</th><th>姓名</th><th>年龄</th></tr>
    </thead>
    <tbody class="nop-fill-box">
    <tr><td>1</td><td>张三</td><td>12</td></tr>
    <tr><td>2</td><td>张三</td><td>12</td></tr>
    <tr><td>3</td><td>张三</td><td>12</td></tr>
    <tr><td>4</td><td>张三</td><td>12</td></tr>
    <tr><td>5</td><td>张三</td><td>12</td></tr>
    <tr><td>6</td><td>张三</td><td>12</td></tr>
    <tr><td>7</td><td>张三</td><td>12</td></tr>
    <tr><td>8</td><td>张三</td><td>12</td></tr>
    <tr><td>9</td><td>张三</td><td>12</td></tr>
    <tr><td>10</td><td>张三</td><td>12</td></tr>
    <tr><td>1</td><td>张三</td><td>12</td></tr>
    <tr><td>2</td><td>张三</td><td>12</td></tr>
    <tr><td>3</td><td>张三</td><td>12</td></tr>
    <tr><td>4</td><td>张三</td><td>12</td></tr>
    <tr><td>5</td><td>张三</td><td>12</td></tr>
    <tr><td>6</td><td>张三</td><td>12</td></tr>
    <tr><td>7</td><td>张三</td><td>12</td></tr>
    <tr><td>8</td><td>张三</td><td>12</td></tr>
    <tr><td>9</td><td>张三</td><td>12</td></tr>
    <tr><td>10</td><td>张三</td><td>12</td></tr>
    <tr><td>1</td><td>张三</td><td>12</td></tr>
    <tr><td>2</td><td>张三</td><td>12</td></tr>
    <tr><td>3</td><td>张三</td><td>12</td></tr>
    <tr><td>4</td><td>张三</td><td>12</td></tr>
    <tr><td>5</td><td>张三</td><td>12</td></tr>
    <tr><td>6</td><td>张三</td><td>12</td></tr>
    <tr><td>7</td><td>张三</td><td>12</td></tr>
    <tr><td>8</td><td>张三</td><td>12</td></tr>
    <tr><td>9</td><td>张三</td><td>12</td></tr>
    <tr><td>10</td><td>张三</td><td>12</td></tr>
    <tr><td>1</td><td>张三</td><td>12</td></tr>
    <tr><td>2</td><td>张三</td><td>12</td></tr>
    <tr><td>3</td><td>张三</td><td>12</td></tr>
    <tr><td>4</td><td>张三</td><td>12</td></tr>
    <tr><td>5</td><td>张三</td><td>12</td></tr>
    <tr><td>6</td><td>张三</td><td>12</td></tr>
    <tr><td>7</td><td>张三</td><td>12</td></tr>
    <tr><td>8</td><td>张三</td><td>12</td></tr>
    <tr><td>9</td><td>张三</td><td>12</td></tr>
    <tr><td>10</td><td>张三</td><td>12</td></tr>
    </tbody>
    <tfoot>
    <tr><td colspan="3">表格尾部</td></tr>
    </tfoot>
</table>
<div data-op-type="new-page"></div>
<div data-op-type="pendants"><!-- 定义页面部件（页眉/页脚/书签/水印背景等） -->
    <div class='pendant-title'>第三章：文本盒子示例</div>
</div>
<h1  data-op-type='block'>第3章 文本盒子示例</h1>
<p data-op-type="text-box">012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789</p>
<div data-op-type="new-page"></div><!-- 新页面标记，强制从新页开始 -->
<div data-op-type="pendants"><!-- 定义页面部件（页眉/页脚/书签/水印背景等） -->
    <div class='pendant-title'>第四章：混合盒子</div>
</div>
<h1  data-op-type='block'>第4章 混合盒子</h1><!-- 块 -->
<div data-op-type="mix-box"><!-- 混合盒子 -->
    <div class="nop-fill-box" style='font-size: 14px;line-height: 1.5;color: white'><!-- 文本或块列表，程序会自动差分 -->
        <div data-op-type='block' style='background-color: red;height: 300px;'>red</div>
        <div data-op-type='block' style='background-color: green;height: 300px;'>green</div>
        <div data-op-type='block' style='background-color: blue;height: 300px;'>blue</div>
        <span data-op-type='text' style='color: red'>ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ</span>
    </div>
</div>
                         </textarea>
                        </div>
                    </div>
                </div>
                <div class="row" style="height: 33.3%;background-color: #376ddb;">
                    <div class="col-xs-12 label-el">配&nbsp;&nbsp;&nbsp;&nbsp;置</div>
                    <div class="col-xs-12 value-el" style="">
                        <div class="row" style="height: 100%;">
                            <textarea name="bookConfig" style="width: 100%;height: 100%">
{
  "pageSize": "ISO_A4",
  "orientation": "landscape",
  "padding": "20mm 10mm 20mm 10mm",
  "simpleCatalog": {},
  "simplePageNum": {
    "pendant": "<div class=\"page-num-simple\"><span style=\"\">第${PAGE}页 / 共${TOTAL_PAGE}页</span></div>"
  },
  "toolBar": {
    "serverPrint": true,
    "webPrint": true,
    "saveHtml": true
  },
  "start": true
}
                        </textarea>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-xs-8"  style="height: 100%">
                <div class="row"  style="height: 100%">
                    <iframe id="show-el" sandbox="allow-downloads allow-top-navigation allow-scripts allow-modals" style="width: 100%;height: 100%;background: #999;">
                        <p>不支持SRCDOC属性</p>
                    </iframe>
                </div>
            </div>
        </div>
    </div>

    <script>
         let resetBook = function() {
            let bookConfigStr = $.trim($('[name=bookConfig]').val());
            let bookConfig;
            try{
                bookConfig = JSON.parse(bookConfigStr);
            }catch (e) {
                return;
            }

            bookConfig.start = true;
            bookConfigStr = JSON.stringify(bookConfig,null,2);

            let bookStyle = $.trim($('[name=bookStyle]').val());
            let bookStyleStr = JSON.stringify(bookStyle);
            let bookTpl = $.trim($('[name=bookTpl]').val());

            let endScriptTag = '<\/script>';
            let baseUrl = location.origin + '/';
            let htmlContent = `<!DOCTYPE html>
<html lang="zh-cmn-Hans">
    <head>
        <meta charset="UTF-8">
        <title>screenshot-api-server</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <meta name="renderer" content="webkit">
        <meta name="format-detection" content="telephone=no">
        <base href="${baseUrl}" />
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0">
        <script src="/static/js/polyfill.min.js">${endScriptTag}
        <script src="/static/js/jquery.min.js">${endScriptTag}
        <script src="/static/js/lodash.min.js">${endScriptTag}
        <script src="/static/js/bookjs/latest/bookjs-eazy.min.js">${endScriptTag}
    </head>
    <body>
        <style id="book-style" type="text/css" rel="stylesheet"></style>
        <div id="content-box" style="display: none">${bookTpl}</div>
        <script>
            document.getElementById('book-style').appendChild(document.createTextNode(${bookStyleStr}));
        ${endScriptTag}
        <script>
            bookConfig = ${bookConfigStr};
        ${endScriptTag}
    </body>
</html>`;

            let  blobUrl =  'data:text/html;base64,' + btoa(unescape(encodeURIComponent(htmlContent)));
            // let blobUrl = URL.createObjectURL(new Blob([htmlContent], {
            //     type: 'text/html'
            // }));
            $('#show-el').prop('src',blobUrl);
            let params = {
                bookTpl: bookTpl,
                bookConfig: bookConfig,
                bookStyle: bookStyle,
            };
            console.log(params)
        };
        
        let changeCallback = _.debounce(function(editor,changeObj){
            editor.save();

            resetBook();
        },2000);
        var editorBookStyle = CodeMirror.fromTextArea($('[name=bookStyle]').get(0), {
             lineNumbers: true,
             mode: "css",
             indentUnit: 4,
             theme: "darcula",
             //lint: true,
             matchBrackets: true,    //括号匹配
         }).on('change',changeCallback);
        
         var editorBookTpl = CodeMirror.fromTextArea($('[name=bookTpl]').get(0), {
             lineNumbers: true,
             mode: "text/html",
             indentUnit: 4,
             theme: "darcula",
             //lint: true,
             matchBrackets: true,    //括号匹配
         }).on('change',changeCallback);
        
         var editorBookConfig = CodeMirror.fromTextArea($('[name=bookConfig]').get(0), {
             lineNumbers: true,
             mode: "application/json",
             indentUnit: 4,
             foldGutter: true,
             theme: "darcula",
             lint: true,
             matchBrackets: true,    //括号匹配
        }).on('change',changeCallback);


         resetBook();
    </script>
</body>
</html>
